<!DOCTYPE html>
<html style="height: 100%; width: 100%">


<head>
    <meta charset="UTF-8">
    <title>个人信息提交</title>
</head>

<body style="height: 100%; width: 100%">

<form name="login_form" action="/server_url" method="post"
      style="text-align:center; width: 80%; height: 100%; background-color: aquamarine; padding-top: 10px; padding-bottom: 10px; margin-left: 10%;">

    <div style="width: 100%; height: 10%">
        <span style="width: 10%;">姓名</span><input id="user_name" type="text" name="user_name"
                                                  style="width: 90%; height: 100%"/>
    </div>
    <br/>

    <div style="width: 100%; height: 10%">
        <span style="width: 10%;">手机</span><input id="phone" type="number" name="phone"
                                                  style="width: 90%; height: 100%"/>
    </div>
    <br/>

    <div style="width: 100%; height: 10%">
        <span style="width: 10%;">密码</span><input id="passwd" type="text" name="passwd"
                                                  style="width: 90%; height: 100%"/>
    </div>
    <br/>

    <div style="width: 100%; height: 5%">

        <span style="width: 10%; ">性别</span>
        <span style="width: 40%; "><input type="radio" name="gender" value=0/>男</span>
        <span style="width: 40%; "><input type="radio" name="gender" value=1/>女</span>
    </div>
    <br/>

    <div style="width: 100%; height: 10%">
        <span style="width: 10%;">生日</span><input id="birthday" type="date" name="birthday"
                                                  style="width: 90%; height: 100%"/>
    </div>
    <br/>

    <div style="width: 100%; height: 10%">
        <span style="width: 10%; ">住址</span><input id="address" type="text" name="address"
                                                   style="width: 90%; height: 100%"/>
    </div>
    <br/>

    <div style="width: 100%; height: 20%">
        <span style="width: 10%;">简介</span><input id="introduction" type="text" name="introduction"
                                                  style="width: 90%; height: 100%"/>
    </div>
    <br/>


</form>
<button id="btn-submit" onclick="beforeSubmit()" style="margin-left: 10%; margin-top: 10px; width: 80%; height: 44px;">提交</button>
<!--<div style="width: 80%; height: 44px; background-color: #00AA22">-->
<!--</div>-->

<script type="text/javascript">
    function beforeSubmit() {

        var user_name = document.getElementById('user_name').value;
        var phone = document.getElementById('phone').value;
        var passwd = document.getElementById('passwd').value;

        var birthday = document.getElementById('birthday').value;
        var address = document.getElementById('address').value;
        var introduction = document.getElementById('introduction').value;

        var gender = 0
        var obj = document.getElementsByName("gender");
        for(var i=0; i<obj.length; i ++){
            if(obj[i].checked){
                gender = obj[i].value
            }
        }

        // 1.创建一个FormData对象，直接把我们的表单传进去
        var formData = new FormData(document.forms.namedItem("login_form"));
        formData.user_name = user_name
        formData.phone = phone
        formData.passwd = passwd
        formData.gender = gender
        formData.birthday = birthday
        formData.address = address
        formData.introduction = introduction

        // 2.创建一个http请求对象
        var req = new XMLHttpRequest();
        req.open('post', 'https://media.siiva.com/user/create');
        req.onload = function (resp) {

            var jsonRes = JSON.parse(req.responseText);
            var info = jsonRes.code == 1 ? jsonRes.info : "提交成功"
            alert(info)

        };
        req.send(formData);
    }
</script>

</body>


</html>